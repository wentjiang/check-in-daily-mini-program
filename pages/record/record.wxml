<!--pages/record/record.wxml-->
<view class="page">
  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section card">
    <view class="stats-title">æ‰“å¡ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-number">{{totalCount}}</view>
        <view class="stat-label">æ€»æ‰“å¡æ¬¡æ•°</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{continuousDays}}</view>
        <view class="stat-label">è¿ç»­æ‰“å¡å¤©æ•°</view>
      </view>
    </view>
  </view>

  <!-- è®°å½•åˆ—è¡¨ -->
  <view class="records-section">
    <view wx:if="{{groupedRecords.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">æš‚æ— æ‰“å¡è®°å½•</view>
      <view class="empty-desc">å¼€å§‹ä½ çš„ç¬¬ä¸€æ¬¡æ‰“å¡å§ï¼</view>
    </view>

    <view wx:else>
      <view wx:for="{{groupedRecords}}" wx:key="month" class="month-group">
        <view class="month-header">
          <view class="month-title">{{item.month}}</view>
          <view class="month-count">{{item.records.length}}æ¬¡æ‰“å¡</view>
        </view>
        
        <view class="records-list">
          <view 
            wx:for="{{item.records}}" 
            wx:for-item="record" 
            wx:key="timestamp"
            class="record-item"
          >
            <view class="record-main">
              <view class="record-left">
                <view class="record-type">
                  <text class="type-icon">{{getTypeIcon(record.type)}}</text>
                  <text class="type-name">{{getTypeName(record.type, record.customType)}}</text>
                </view>
                <view class="record-time">
                  <text class="record-date">{{record.date}}</text>
                  <text class="record-hour">{{record.time}}</text>
                </view>
                <view wx:if="{{record.note}}" class="record-note">{{record.note}}</view>
              </view>
              
              <view class="record-actions">
                <button 
                  class="delete-btn"
                  data-index="{{index}}"
                  bindtap="deleteRecord"
                >
                  åˆ é™¤
                </button>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view wx:if="{{records.length > 0}}" class="action-section">
    <button 
      class="btn-secondary clear-btn"
      bindtap="clearAllRecords"
    >
      æ¸…ç©ºæ‰€æœ‰è®°å½•
    </button>
  </view>
</view> 