<!--pages/checkin/checkin.wxml-->
<view class="page">
  <!-- 时间显示 -->
  <view class="time-section card">
    <view class="time-display">
      <view class="current-time">{{currentTime}}</view>
      <view class="current-date">{{currentDate}}</view>
    </view>
    <view class="checkin-status">
      <view class="status-text {{todayChecked ? 'checked' : ''}}">
        {{todayChecked ? '今日已打卡' : '今日未打卡'}}
      </view>
    </view>
  </view>

  <!-- 打卡类型选择 -->
  <view class="type-section card">
    <view class="section-title">选择打卡类型</view>
    <view class="type-grid">
      <view 
        wx:for="{{checkinTypes}}" 
        wx:key="value"
        class="type-item {{checkinType === item.value ? 'selected' : ''}}"
        data-type="{{item.value}}"
        bindtap="selectType"
      >
        <view class="type-icon">{{item.icon}}</view>
        <view class="type-label">{{item.label}}</view>
      </view>
    </view>
    
    <!-- 自定义类型输入 -->
    <view wx:if="{{showCustomInput}}" class="custom-input-section">
      <input 
        class="custom-input"
        placeholder="请输入自定义打卡类型"
        value="{{customType}}"
        bindinput="inputCustomType"
      />
    </view>
  </view>

  <!-- 打卡备注 -->
  <view class="note-section card">
    <view class="section-title">打卡备注（可选）</view>
    <textarea 
      class="note-textarea"
      placeholder="记录一下今天的心情或计划..."
      value="{{checkinNote}}"
      bindinput="inputNote"
      maxlength="200"
    ></textarea>
    <view class="note-count">{{checkinNote.length}}/200</view>
  </view>

  <!-- 打卡按钮 -->
  <view class="action-section">
    <button 
      class="btn-primary checkin-btn {{todayChecked ? 'disabled' : ''}}"
      bindtap="doCheckin"
      disabled="{{todayChecked}}"
    >
      {{todayChecked ? '今日已打卡' : '立即打卡'}}
    </button>
    
    <button 
      wx:if="{{todayChecked}}"
      class="btn-secondary view-record-btn"
      bindtap="viewTodayRecord"
    >
      查看今日记录
    </button>
  </view>

  <!-- 打卡提示 -->
  <view class="tips-section card">
    <view class="tips-title">💡 打卡小贴士</view>
    <view class="tips-content">
      <view class="tip-item">• 每天只能打卡一次，请珍惜机会</view>
      <view class="tip-item">• 可以选择不同的打卡类型来分类记录</view>
      <view class="tip-item">• 添加备注可以帮助你更好地回顾每一天</view>
      <view class="tip-item">• 坚持打卡，养成好习惯</view>
    </view>
  </view>
</view> 