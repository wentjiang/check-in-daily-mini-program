<!--pages/index/index.wxml-->
<view class="page">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section card">
    <view class="flex-between">
      <view class="user-info">
        <view class="avatar-container">
          <open-data wx:if="{{canIUseOpenData}}" type="userAvatarUrl" class="user-avatar"></open-data>
          <image wx:else class="user-avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}"></image>
        </view>
        <view class="user-details">
          <view class="username">
            <open-data wx:if="{{canIUseOpenData}}" type="userNickName" class="user-nickname"></open-data>
            <text wx:else>{{userInfo.nickName || 'å¾®ä¿¡ç”¨æˆ·'}}</text>
          </view>
          <view class="greeting">{{greeting}}</view>
        </view>
      </view>
      <view class="date-info">
        <view class="current-date">{{currentDate}}</view>
        <view class="day-status {{todayChecked ? 'checked' : ''}}">
          {{todayChecked ? 'å·²æ‰“å¡' : 'æœªæ‰“å¡'}}
        </view>
      </view>
    </view>
  </view>

  <!-- æ‰“å¡ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stats-card card">
      <view class="stats-title">æ‰“å¡ç»Ÿè®¡</view>
      <view class="stats-grid">
        <view class="stat-item">
          <view class="stat-number">{{checkinCount}}</view>
          <view class="stat-label">æ€»æ‰“å¡æ¬¡æ•°</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{continuousDays}}</view>
          <view class="stat-label">è¿ç»­æ‰“å¡å¤©æ•°</view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«é€Ÿæ‰“å¡ -->
  <view class="quick-checkin-section">
    <view class="card">
      <view class="section-title">å¿«é€Ÿæ‰“å¡</view>
      <view class="quick-checkin-content">
        <view class="checkin-status">
          <view class="status-icon {{todayChecked ? 'checked' : ''}}">
            <text class="iconfont">{{todayChecked ? 'âœ“' : 'â—‹'}}</text>
          </view>
          <view class="status-text">
            <view class="status-title">{{todayChecked ? 'ä»Šæ—¥å·²æ‰“å¡' : 'ä»Šæ—¥æœªæ‰“å¡'}}</view>
            <view class="status-desc">{{todayChecked ? 'ç»§ç»­ä¿æŒï¼Œæ˜å¤©è§ï¼' : 'ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¿«é€Ÿæ‰“å¡'}}</view>
          </view>
        </view>
        
        <button 
          class="btn-primary checkin-btn {{todayChecked ? 'disabled' : ''}}"
          bindtap="quickCheckin"
          disabled="{{todayChecked}}"
        >
          {{todayChecked ? 'ä»Šæ—¥å·²æ‰“å¡' : 'ç«‹å³æ‰“å¡'}}
        </button>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½å¯¼èˆª -->
  <view class="nav-section">
    <view class="card">
      <view class="section-title">æ›´å¤šåŠŸèƒ½</view>
      <view class="nav-grid">
        <view class="nav-item" bindtap="goToCheckin">
          <view class="nav-icon">ğŸ“</view>
          <view class="nav-text">è¯¦ç»†æ‰“å¡</view>
        </view>
        <view class="nav-item" bindtap="goToRecord">
          <view class="nav-icon">ğŸ“Š</view>
          <view class="nav-text">æ‰“å¡è®°å½•</view>
        </view>
      </view>
    </view>
  </view>
</view> 